var Canvas = require("canvas");
var { splitText, drawCircle, resizeText } = require("editor-canvas");

module.exports = {
  createWelcomeImage: async(member,welcomer) => {
    var _0xeb21=["\x61\x76\x61\x74\x61\x72","\x75\x73\x65\x72\x6E\x61\x6D\x65","\x74\x65\x78\x74","\x62\x61\x63\x6B\x67\x72\x6F\x75\x6E\x64","\x62\x61\x73\x65\x36\x34","\x66\x72\x6F\x6D","\x6C\x6F\x61\x64\x49\x6D\x61\x67\x65"];var avatars=welcomer[_0xeb21[0]];var usernames=welcomer[_0xeb21[1]];var text=welcomer[_0xeb21[2]];var background=welcomer[_0xeb21[3]];if(background){try{background=  await Canvas[_0xeb21[6]](Buffer[_0xeb21[5]](background,_0xeb21[4]))}catch(err){background=  await Canvas[_0xeb21[6]](background)};â€Š}
    var canvas = Canvas.createCanvas(background?.width || 400, background?.height || 200);
    var _0x89f1=["\x32\x64","\x67\x65\x74\x43\x6F\x6E\x74\x65\x78\x74","\x77\x69\x64\x74\x68","\x68\x65\x69\x67\x68\x74","\x64\x72\x61\x77\x49\x6D\x61\x67\x65","\x6A\x70\x67","\x64\x69\x73\x70\x6C\x61\x79\x41\x76\x61\x74\x61\x72\x55\x52\x4C","\x75\x73\x65\x72","\x59\x45\x4C\x4C\x4F\x57","\x6C\x6F\x61\x64\x49\x6D\x61\x67\x65","\x78","\x79","\x66\x69\x6C\x6C\x53\x74\x79\x6C\x65","\x57\x48\x49\x54\x45","\x75\x73\x65\x72\x6E\x61\x6D\x65","\x66\x6F\x6E\x74","","\x20\x41\x72\x69\x61\x6C","\x66\x69\x6C\x6C\x54\x65\x78\x74","\x77\x65\x6C\x63\x6F\x6D\x65\x20\x54\x6F","\x63\x6F\x6E\x74\x65\x6E\x74","\x74\x6F\x42\x75\x66\x66\x65\x72"];ctx= canvas[_0x89f1[1]](_0x89f1[0]);if(background){ctx[_0x89f1[4]](background,0,0,canvas[_0x89f1[2]],canvas[_0x89f1[3]])};var avatar=member[_0x89f1[7]][_0x89f1[6]]({format:_0x89f1[5]});avatar=  await drawCircle({image:avatar,stroke:null});avatar=  await Canvas[_0x89f1[9]](avatar);ctx[_0x89f1[4]](avatar,avatars[_0x89f1[10]],avatars[_0x89f1[11]],avatars[_0x89f1[2]],avatars[_0x89f1[3]]);ctx[_0x89f1[12]]= _0x89f1[13];let usernameFont=resizeText(ctx,{text:member[_0x89f1[7]][_0x89f1[14]],font:17.5* (canvas[_0x89f1[2]]/ 400)+ (canvas[_0x89f1[2]]/ 100)});ctx[_0x89f1[15]]= `${_0x89f1[16]}${usernameFont}${_0x89f1[17]}`;var username=splitText(ctx,{text:member[_0x89f1[7]][_0x89f1[14]],width:canvas[_0x89f1[2]]- usernames[_0x89f1[10]]- (20* (canvas[_0x89f1[2]]/ 400)),maxLine:1});ctx[_0x89f1[18]](username,usernames[_0x89f1[10]],usernames[_0x89f1[11]]);let textFont=resizeText(ctx,{text:_0x89f1[19],font:15.79* (canvas[_0x89f1[2]]/ 400)+ (canvas[_0x89f1[2]]/ 100)});ctx[_0x89f1[15]]= `${_0x89f1[16]}${textFont}${_0x89f1[17]}`;var text1=splitText(ctx,{text:text[_0x89f1[20]],width:canvas[_0x89f1[2]]- text[_0x89f1[10]]- (20* (canvas[_0x89f1[2]]/ 400)),maxLine:2});ctx[_0x89f1[18]](text1,text[_0x89f1[10]],text[_0x89f1[11]]);return canvas[_0x89f1[21]]()
  }
}
